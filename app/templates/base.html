<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Aplikacja Finansowa{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <!-- Topbar na bazie Twojej nawigacji -->
    <nav class="topbar">
        <div class="topbar-content">
            <div class="logo-wrap">
                <div class="logo">

                </div>
                <span class="logo-text">{% block nav_title %}Aplikacja Finansowa{% endblock %}</span>
            </div>

            <div class="nav-buttons">
                <a class="btn btn-secondary" href="{{ url_for('main.index') }}" >Główna</a>
                <a class="btn btn-secondary" href="{{ url_for('portfolio.portfolio') }}">Portfolio</a>
                <a class="btn btn-secondary" href="{{ url_for('main.statistics') }}">Statystyki</a>
                <a class="btn btn-secondary" href="{{ url_for('settings.settings') }}">Ustawienia</a>
                {% if current_user and current_user.is_authenticated %}
                <span class="ms-2" style="color:#9aa5b1;">{{ current_user.email }}</span>
                <a class="btn btn-outline-light ms-2" href="{{ url_for('auth.logout') }}">Wyloguj</a>
                {% else %}
                <a class="btn btn-primary ms-2" href="{{ url_for('auth.login') }}">Logowanie</a>
                {% endif %}
            </div>
        </div>
    </nav>

    <div class="main-container">
        {% block content %}{% endblock %}
    </div>

    <footer class="footer mt-5 text-center" style="color: #5a6b7d; font-size: 0.9rem;">
    © 2025 Jakub Jan Kaźmierczyk Aplikacja Finansowa
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    {# Popup alerts for flash messages #}
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    <script>
      (function() {
        var msgs = {{ messages|tojson }};
        msgs.forEach(function(m){
          var category = m[0];
          var text = m[1];
          if (category === 'danger' || category === 'error') {
            alert(text);
          }
        });
      })();
    </script>
    {% endif %}
    {% endwith %}
</body>
</html>
