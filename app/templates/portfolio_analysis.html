{% extends "portfolio_base.html" %}

{% block portfolio_title %}Analiza{% endblock %}

{% block portfolio_content %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="mb-0">Wzrost wartości portfela obligacji w czasie</h2>
    <div class="d-flex align-items-center gap-2">
        <label for="period" class="me-2 mb-0" style="color:#5a6b7d;">Skala:</label>
        <select id="period" class="form-select form-select-sm" style="width: 220px;">
            <option value="day" selected>Dzień</option>
            <option value="week">Tydzień</option>
            <option value="month">Miesiąc</option>
            <option value="quarter">3 miesiące</option>
        </select>
    </div>
</div>

<div style="width: 100%; max-width: 1100px; height: 48vh; min-height: 320px; margin: 0 auto;">
    <canvas id="valueChart"></canvas>
</div>
{% if not timeseries.labels %}
<div class="alert alert-info mt-3">Brak danych do wyświetlenia. Zaimportuj plik CSV w zakładce Portfolio.</div>
{% endif %}

<!-- Inflation Comparison Section -->
{% if inflation_data and inflation_data.labels %}
<div class="mt-5" style="max-width: 1000px; margin: 0 auto;">
    <h3 class="h5 mb-3">Zwrot portfela r/r vs inflacja r/r</h3>
    <div style="position: relative; height: 360px;">
        <canvas id="inflationCompare"></canvas>
    </div>
</div>
{% endif %}

<!-- Data Injection -->
<script id="ts-data" type="application/json">{{ timeseries | tojson }}</script>
<script id="inflation-data" type="application/json">{{ inflation_data | default({}) | tojson }}</script>

<script src="{{ url_for('static', filename='js/analysis.js') }}"></script>
{% endblock %}